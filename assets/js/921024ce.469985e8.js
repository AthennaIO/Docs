"use strict";(self.webpackChunk_athenna_docs=self.webpackChunk_athenna_docs||[]).push([[7699],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return m}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),u=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=u(r),m=n,h=c["".concat(l,".").concat(m)]||c[m]||p[m]||i;return r?a.createElement(h,o(o({ref:t},d),{},{components:r})):a.createElement(h,o({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var u=2;u<i;u++)o[u]=r[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},4728:function(e,t,r){r.r(t),r.d(t,{contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var a=r(7462),n=r(3366),i=(r(7294),r(3905)),o=["components"],s={sidebar_position:1,id:"routing",title:"Routing",hide_title:!0,hide_table_of_contents:!0,tags:["Getting Started","Architecture Concepts","The Basics"]},l=void 0,u={unversionedId:"the-basics/http/routing",id:"the-basics/http/routing",title:"Routing",description:"\ud83c\udfe0",source:"@site/docs/the-basics/http/routing.mdx",sourceDirName:"the-basics/http",slug:"/the-basics/http/routing",permalink:"/docs/the-basics/http/routing",editUrl:"https://github.com/AthennaIO/Docs/docs/the-basics/http/routing.mdx",tags:[{label:"Getting Started",permalink:"/docs/tags/getting-started"},{label:"Architecture Concepts",permalink:"/docs/tags/architecture-concepts"},{label:"The Basics",permalink:"/docs/tags/the-basics"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"routing",title:"Routing",hide_title:!0,hide_table_of_contents:!0,tags:["Getting Started","Architecture Concepts","The Basics"]},sidebar:"tutorialSidebar",previous:{title:"Facades",permalink:"/docs/architecture-concepts/facades"},next:{title:"Middlewares",permalink:"/docs/the-basics/http/middlewares"}},d=[{value:"Basic routing",id:"id-base-routing",children:[{value:"Available Router Methods",id:"available-router-methods",children:[],level:3}],level:2},{value:"Redirect routes",id:"id-redirect-routes",children:[],level:2},{value:"The route list",id:"id-the-route-list",children:[],level:2},{value:"Route parameters",id:"id-route-parameters",children:[],level:2},{value:"Route groups",id:"id-route-groups",children:[{value:"Middleware",id:"id-middleware",children:[],level:3},{value:"Route prefixes",id:"id-route-prefixes",children:[],level:3}],level:2},{value:"Cross-origin resource sharing (CORS)",id:"id-cross-origin-resource-sharing",children:[],level:2}],p={toc:d};function c(e){var t=e.components,r=(0,n.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("nav",{"aria-label":"breadcrumbs"},(0,i.kt)("ul",{class:"breadcrumbs"},(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link",href:"/"},"\ud83c\udfe0")),(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link"},"The Basics")),(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link"},"Http")),(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link",href:"/docs/the-basics/http/routing"},"Routing")))),(0,i.kt)("span",{class:"badge badge--secondary margin-top-bot"},"version 1.0.0"),(0,i.kt)("h1",{id:"routing"},"Routing"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"basic-routing"},(0,i.kt)("a",{parentName:"h4",href:"#id-basic-routing"},"Basic routing")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"redirect-routes"},(0,i.kt)("a",{parentName:"h4",href:"#id-redirect-routes"},"Redirect routes"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"the-route-list"},(0,i.kt)("a",{parentName:"h4",href:"#id-the-route-list"},"The route list"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"route-parameters"},(0,i.kt)("a",{parentName:"h4",href:"#id-route-parameters"},"Route parameters"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"route-groups"},(0,i.kt)("a",{parentName:"h4",href:"#id-route-groups"},"Route groups")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"middlewares"},(0,i.kt)("a",{parentName:"h4",href:"#id-middlewares"},"Middlewares"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"route-prefixes"},(0,i.kt)("a",{parentName:"h4",href:"#id-route-prefixes"},"Route prefixes"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"cross-origin-resource-sharing-cors"},(0,i.kt)("a",{parentName:"h4",href:"#id-cross-origin-resource-sharing"},"Cross-origin resource sharing (CORS)")))),(0,i.kt)("h2",{id:"id-base-routing"},"Basic routing"),(0,i.kt)("p",null,"The most basic Athenna routes accept an url and a closure, providing a very simple and expressive method of defining\nroutes and behavior without complicated routing configuration files:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import { Route } from '@athenna/http' // Route Facade\n\nRoute.get('/welcome', ({ response }) => {\n    return response.status(200).send({ hello: 'world' })\n})\n")),(0,i.kt)("h3",{id:"available-router-methods"},"Available Router Methods"),(0,i.kt)("p",null,"The router allows you to register routes that respond to any HTTP verb:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.get(url, callback)\nRoute.post(url, callback)\nRoute.put(url, callback)\nRoute.patch(url, callback)\nRoute.delete(url, callback)\nRoute.options(url, callback)\n")),(0,i.kt)("p",null,"Sometimes you may need to register a route that responds to multiple HTTP verbs. You may do so using the ",(0,i.kt)("inlineCode",{parentName:"p"},"any")," method to\nrespond to all HTTP verbs:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.any('/', () => {\n    //\n})\n")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"When defining multiple routes that share the same ",(0,i.kt)("inlineCode",{parentName:"p"},"url"),", routes using the ",(0,i.kt)("inlineCode",{parentName:"p"},"get"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"post"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"put"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"patch"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"delete"),", and\n",(0,i.kt)("inlineCode",{parentName:"p"},"options")," methods should be defined before routes using the ",(0,i.kt)("inlineCode",{parentName:"p"},"any")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"redirect")," methods. This ensures the incoming\nrequest is matched with the correct route."))),(0,i.kt)("h2",{id:"id-redirect-routes"},"Redirect routes"),(0,i.kt)("p",null,"If you are defining a route that redirects to another ",(0,i.kt)("inlineCode",{parentName:"p"},"url"),", you may use the ",(0,i.kt)("inlineCode",{parentName:"p"},"Route.redirect")," method. This method provides\na convenient shortcut so that you do not have to define a full route or controller for performing a simple redirect:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.redirect('/here', '/there')\n")),(0,i.kt)("p",null,"By default, ",(0,i.kt)("inlineCode",{parentName:"p"},"Route.redirect")," returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"302")," status code. You may customize the status code using the optional third\nparameter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.redirect('/here', '/there', 301)\n")),(0,i.kt)("h2",{id:"id-the-route-list"},"The route list"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"route:list")," command can easily provide an overview of all the routes that are defined by your application:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"node artisan route:list\n")),(0,i.kt)("p",null,"By default, the route middleware that are assigned to each route will not be displayed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"route:list")," output;\nhowever, you can instruct Athenna to display the route middleware by adding the ",(0,i.kt)("inlineCode",{parentName:"p"},"-m, --middleware")," option to the command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"node artisan route:list --middleware\n")),(0,i.kt)("h2",{id:"id-route-parameters"},"Route parameters"),(0,i.kt)("p",null,"Sometimes you will need to capture segments of the URL within your route. For example, you may need to capture a\nuser's ID from the URL. You may do so by defining route parameters:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.get('/user/:id', ({ response, params }) => {\n    return response.send({ user: `User ${params.id}` })\n})\n")),(0,i.kt)("p",null,"You may define as many route parameters as required by your route:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.get('/posts/:postId/comments/:commentId', ({ response, params }) => {\n    return response.send({ params })\n})\n")),(0,i.kt)("h2",{id:"id-route-groups"},"Route groups"),(0,i.kt)("p",null,"Route groups allow you to share route attributes, such as middleware, across a large number of routes without needing\nto define those attributes on each individual route."),(0,i.kt)("h3",{id:"id-middleware"},"Middleware"),(0,i.kt)("p",null,"To assign ",(0,i.kt)("a",{parentName:"p",href:"/docs/the-basics/http/middlewares"},(0,i.kt)("inlineCode",{parentName:"a"},"middlewares"))," to all routes within a group, you may use the ",(0,i.kt)("inlineCode",{parentName:"p"},"middleware"),"\nmethod before defining the group. Middleware are executed in the order they are listed in the array:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.group(() => {\n    Route.get('/', () => {\n        // Uses first & second middleware...\n    })\n\n    Route.get('/user/profile', () => {\n        // Uses first & second middleware...\n    })\n}).middleware(['first', 'second'])\n")),(0,i.kt)("h3",{id:"id-route-prefixes"},"Route prefixes"),(0,i.kt)("p",null,"The prefix method may be used to prefix each route in the group with a given URL. For example, you may want to prefix\nall route URLs within the group with ",(0,i.kt)("inlineCode",{parentName:"p"},"admin"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.group(() => {\n    Route.get('/users', () => {\n        // Matches only the \"/admin/users\" URL\n    })\n}).prefix('admin')\n")),(0,i.kt)("h2",{id:"id-cross-origin-resource-sharing"},"Cross-origin resource sharing (CORS)"),(0,i.kt)("p",null,"Cross-Origin Resource Sharing (CORS) is an HTTP-header based mechanism that allows a server to indicate any origins\n(domain, scheme, or port) other than its own from which a browser should permit loading resources."),(0,i.kt)("p",null,"Athenna uses the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/fastify/fastify-cors"},(0,i.kt)("inlineCode",{parentName:"a"},"fastify-cors"))," plugin inside ",(0,i.kt)("inlineCode",{parentName:"p"},"HttpKernel"),". All the configurations\nthat ",(0,i.kt)("inlineCode",{parentName:"p"},"fastify-cors")," supports can be set inside ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file in the ",(0,i.kt)("inlineCode",{parentName:"p"},"cors")," object."),(0,i.kt)("p",null,"Rate limit plugin is registered in your http application by default, but you can remove it setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"noCors")," as\n",(0,i.kt)("inlineCode",{parentName:"p"},"true")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For more information on CORS and CORS headers, please consult the\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"MDN web documentation on CORS"),"."))))}c.isMDXComponent=!0}}]);