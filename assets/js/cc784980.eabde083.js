"use strict";(self.webpackChunk_athenna_docs=self.webpackChunk_athenna_docs||[]).push([[217],{4193:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var i=n(4848),s=n(8453);const a={title:"Static Files",sidebar_position:12,description:"See how to serve static files in Athenna REST API application."},o="Static Files",c={id:"rest-api-application/static-files",title:"Static Files",description:"See how to serve static files in Athenna REST API application.",source:"@site/docs/rest-api-application/static-files.mdx",sourceDirName:"rest-api-application",slug:"/rest-api-application/static-files",permalink:"/docs/rest-api-application/static-files",draft:!1,unlisted:!1,editUrl:"https://github.com/AthennaIO/Docs/tree/main/docs/rest-api-application/static-files.mdx",tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"Static Files",sidebar_position:12,description:"See how to serve static files in Athenna REST API application."},sidebar:"tutorialSidebar",previous:{title:"Views",permalink:"/docs/rest-api-application/views"},next:{title:"Commands",permalink:"/docs/cli-application/commands"}},r={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Basic usage",id:"basic-usage",level:2},{value:"Custom file name",id:"custom-file-name",level:3},{value:"Disabling static file server",id:"disabling-static-file-server",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"static-files",children:"Static Files"}),"\n",(0,i.jsx)(t.p,{children:"See how to serve static files in Athenna REST API application."}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["In Athenna you can use the ",(0,i.jsx)(t.code,{children:"response"})," object to serve static\nfiles from a given directory."]}),"\n",(0,i.jsx)(t.h2,{id:"basic-usage",children:"Basic usage"}),"\n",(0,i.jsxs)(t.p,{children:["Athenna uses the ",(0,i.jsx)(t.a,{href:"https://github.com/fastify/fastify-static",children:(0,i.jsx)(t.code,{children:"@fastify/static"})}),"\nplugins inside ",(0,i.jsx)(t.code,{children:"HttpKernel"}),". All the configurations that ",(0,i.jsx)(t.code,{children:"@fastify/static"}),"\nsupports can be set inside ",(0,i.jsx)(t.code,{children:"Path.config('http.ts')"})," file in the ",(0,i.jsx)(t.code,{children:"static"}),"\nobject."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.config('http.ts')\"",children:"import { Path } from '@athenna/common'\n\nexport default {\n  static: {\n    enabled: true,\n    root: Path.public(),\n    prefix: '/public/'\n  }\n}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Now you can use the ",(0,i.jsx)(t.code,{children:"response.sendFile()"})," methods to serve\nfiles from ",(0,i.jsx)(t.code,{children:"Path.public()"})," directory:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.get('/hello', ({ response }) => {\n  // Serve Path.public('image.png') directly\n  return response.sendFile('image.png') \ud83d\udc48\n})\n"})}),"\n",(0,i.jsx)(t.p,{children:"To serve a file from a different root location add the\nroot path as second parameter:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.get('/hello', ({ response }) => {\n  return response.sendFile('image.png', Path.build()) \ud83d\udc48\n})\n"})}),"\n",(0,i.jsx)(t.p,{children:"You could also add options directly in the response:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.get('/hello', ({ response }) => {\n  return response.sendFile('image.png', {\n    cacheControl: false,\n    etag: true,\n    dotfiles: 'ignore',\n    lastModified: true\n  })\n})\n"})}),"\n",(0,i.jsx)(t.h3,{id:"custom-file-name",children:"Custom file name"}),"\n",(0,i.jsxs)(t.p,{children:["You can use the ",(0,i.jsx)(t.code,{children:"response.download()"})," to set a custom file name\nby changing the ",(0,i.jsx)(t.code,{children:"content-disposition"})," header:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.get('/hello', ({ response }) => {\n  return response.download('image.png', 'custom-image.png') \ud83d\udc48\n})\n"})}),"\n",(0,i.jsx)(t.p,{children:"You could also add options directly in the response:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.get('/hello', ({ response }) => {\n  return response.download('image.png', 'custom-image.png', {\n    cacheControl: false,\n    etag: true,\n    dotfiles: 'ignore',\n    lastModified: true\n  })\n})\n"})}),"\n",(0,i.jsx)(t.h2,{id:"disabling-static-file-server",children:"Disabling static file server"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"HttpKernel"})," class will automatically disable the\nplugin registration if the package does not exist, so\nto disable static file server in Athenna you need to\nremove the ",(0,i.jsx)(t.code,{children:"@fastify/static"})," package from your\napplication:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm remove @fastify/static\n"})}),"\n",(0,i.jsxs)(t.p,{children:["You can also disable by setting ",(0,i.jsx)(t.code,{children:"http.static.enabled"})," to ",(0,i.jsx)(t.code,{children:"false"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.config('http.ts')\"",children:"export default {\n  static: {\n    enabled: false\n  }\n}\n"})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var i=n(6540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);