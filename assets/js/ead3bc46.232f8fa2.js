"use strict";(self.webpackChunk_athenna_docs=self.webpackChunk_athenna_docs||[]).push([[9192],{3905:function(e,n,t){t.d(n,{Zo:function(){return g},kt:function(){return m}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},g=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=i,u=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return t?a.createElement(u,o(o({ref:n},g),{},{components:t})):a.createElement(u,o({ref:n},g))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3058:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return g}});var a=t(7462),i=t(3366),r=(t(7294),t(3905)),o=["components"],l={sidebar_position:3,id:"logging",title:"Logging",hide_title:!0,hide_table_of_contents:!0,tags:["Getting Started","Architecture Concepts","The Basics","Logging"]},s=void 0,c={unversionedId:"the-basics/logging",id:"the-basics/logging",title:"Logging",description:"\ud83c\udfe0",source:"@site/docs/the-basics/logging.mdx",sourceDirName:"the-basics",slug:"/the-basics/logging",permalink:"/docs/the-basics/logging",editUrl:"https://github.com/AthennaIO/Docs/docs/the-basics/logging.mdx",tags:[{label:"Getting Started",permalink:"/docs/tags/getting-started"},{label:"Architecture Concepts",permalink:"/docs/tags/architecture-concepts"},{label:"The Basics",permalink:"/docs/tags/the-basics"},{label:"Logging",permalink:"/docs/tags/logging"}],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,id:"logging",title:"Logging",hide_title:!0,hide_table_of_contents:!0,tags:["Getting Started","Architecture Concepts","The Basics","Logging"]},sidebar:"tutorialSidebar",previous:{title:"Running",permalink:"/docs/the-basics/cli/running"},next:{title:"Error Handling",permalink:"/docs/the-basics/errors"}},g=[{value:"Introduction",id:"id-introduction",children:[],level:2},{value:"Configuration",id:"id-configuration",children:[{value:"Available channel drivers",id:"id-available-channel-drivers",children:[],level:3},{value:"Channel prerequisites",id:"id-channel-prerequisites",children:[{value:"Configuring the Slack channel",id:"id-configuring-the-slack-channel",children:[],level:4},{value:"Configuring the Discord channel",id:"id-configuring-the-discord-channel",children:[],level:4},{value:"Configuring the Telegram channel",id:"id-configuring-the-telegram-channel",children:[],level:4}],level:3}],level:2},{value:"Writing log messages",id:"id-writing-log-messages",children:[{value:"Writing to specific channels",id:"id-writing-to-specific-channels",children:[],level:3},{value:"Building log stacks",id:"id-building-log-stacks",children:[{value:"Log levels",id:"id-log-levels",children:[],level:4}],level:3},{value:"Runtime configurations",id:"id-runtime-configurations",children:[],level:3}],level:2},{value:"Formatters",id:"id-formatters",children:[{value:"Available channel formatters",id:"id-available-channel-formatters",children:[],level:3},{value:"Writing using specific formatter",id:"id-writing-using-specific-formatter",children:[],level:3}],level:2},{value:"Implementing your own driver",id:"id-implementing-your-own-driver",children:[],level:2},{value:"Implementing your own formatter",id:"id-implementing-your-own-formatter",children:[],level:2}],p={toc:g};function d(e){var n=e.components,t=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("nav",{"aria-label":"breadcrumbs"},(0,r.kt)("ul",{class:"breadcrumbs"},(0,r.kt)("li",{class:"breadcrumbs__item"},(0,r.kt)("a",{class:"breadcrumbs__link",href:"/"},"\ud83c\udfe0")),(0,r.kt)("li",{class:"breadcrumbs__item"},(0,r.kt)("a",{class:"breadcrumbs__link"},"The Basics")),(0,r.kt)("li",{class:"breadcrumbs__item"},(0,r.kt)("a",{class:"breadcrumbs__link",href:"/docs/the-basics/logging"},"Logging")))),(0,r.kt)("span",{class:"badge badge--secondary margin-top-bot"},"version 1.0.0"),(0,r.kt)("h1",{id:"logging"},"Logging"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"introduction"},(0,r.kt)("a",{parentName:"h4",href:"#id-introduction"},"Introduction"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"configuration"},(0,r.kt)("a",{parentName:"h4",href:"#id-configuration"},"Configuration")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"available-channel-drivers"},(0,r.kt)("a",{parentName:"h4",href:"#id-available-channel-drivers"},"Available channel drivers"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"channel-prerequisites"},(0,r.kt)("a",{parentName:"h4",href:"#id-channel-prerequisites"},"Channel prerequisites"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"writing-log-messages"},(0,r.kt)("a",{parentName:"h4",href:"#id-writing-log-messages"},"Writing log messages")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"writing-to-specific-channel"},(0,r.kt)("a",{parentName:"h4",href:"#id-writing-to-specific-channel"},"Writing to specific channel"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"building-log-stacks"},(0,r.kt)("a",{parentName:"h4",href:"#id-building-log-stacks"},"Building log stacks")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"log-levels"},(0,r.kt)("a",{parentName:"h4",href:"#id-log-levels"},"Log levels"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"runtime-configurations"},(0,r.kt)("a",{parentName:"h4",href:"#id-runtime-configurations"},"Runtime configurations"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"formatters"},(0,r.kt)("a",{parentName:"h4",href:"#id-formatters"},"Formatters")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"available-channel-formatters"},(0,r.kt)("a",{parentName:"h4",href:"#id-available-channel-formatters"},"Available channel formatters"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"writing-using-specific-formatter"},(0,r.kt)("a",{parentName:"h4",href:"#id-writing-using-specific-formatter"},"Writing using specific formatter"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"implementing-your-own-driver"},(0,r.kt)("a",{parentName:"h4",href:"#id-implementing-your-own-driver"},"Implementing your own driver"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"implementing-your-own-formatter"},(0,r.kt)("a",{parentName:"h4",href:"#id-implementing-your-own-formatter"},"Implementing your own formatter")))),(0,r.kt)("h2",{id:"id-introduction"},"Introduction"),(0,r.kt)("p",null,"To help you learn more about what's happening within your application, Athenna provides robust logging services that\nallow you to log messages to file, console, buckets and even to Slack to notify your entire team."),(0,r.kt)("p",null,'Athenna logging is based on "channels". Each channel represents a specific way of writing log information. For example,\nthe ',(0,r.kt)("inlineCode",{parentName:"p"},"application")," channel writes log of your application when bootstrapping, while the ",(0,r.kt)("inlineCode",{parentName:"p"},"request")," channel writes log of\nthe http requests that your application receives."),(0,r.kt)("h2",{id:"id-configuration"},"Configuration"),(0,r.kt)("p",null,"All the configuration options for your application's logging behavior is housed in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js")," configuration file.\nThis file allows you to configure your application's log channels, so be sure to review each of the available channels\nand their options. We'll review a few common options below."),(0,r.kt)("h3",{id:"id-available-channel-drivers"},"Available channel drivers"),(0,r.kt)("p",null,'Each log channel is powered by a "driver". The driver determines how and where the log message is actually transported.\nThe following log channel drivers are available in every Athenna application. An entry for most of these drivers is\nalready present in your application\'s ',(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js")," configuration file, so be sure to review this file to become\nfamiliar with its contents:"),(0,r.kt)("table",null,(0,r.kt)("thead",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,"Name"),(0,r.kt)("th",null,"Description"))),(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"stack")),(0,r.kt)("td",null,'A wrapper to facilitate creating "multi-channel" channels')),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"console")),(0,r.kt)("td",null,"A driver that transports the log to the stdout/stderr using process.stdout.write")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"file")),(0,r.kt)("td",null,"A driver that transports the log to a file")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"null")),(0,r.kt)("td",null,"A driver that discards all log messages")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"slack")),(0,r.kt)("td",null,"A driver that transports the log message to a slack channel")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"discord")),(0,r.kt)("td",null,"A driver that transports the log message to a discord channel")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"telegram")),(0,r.kt)("td",null,"A driver that transports the log message to a telegram chat")))),(0,r.kt)("h3",{id:"id-channel-prerequisites"},"Channel prerequisites"),(0,r.kt)("p",null,"Almost all channels doesn't need any additional configuration to work. But some of than need a couple of changes in ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js"),"\nfile to be able to use. They are ",(0,r.kt)("inlineCode",{parentName:"p"},"slack"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"discord")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"telegram"),"."),(0,r.kt)("h4",{id:"id-configuring-the-slack-channel"},"Configuring the Slack channel"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"slack")," channel only requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," property inside options. This URL should match a URL for an ",(0,r.kt)("a",{parentName:"p",href:"https://api.slack.com/messaging/webhooks"},(0,r.kt)("inlineCode",{parentName:"a"},"incoming webhook")),"\nthat you have configured for your Slack team."),(0,r.kt)("h4",{id:"id-configuring-the-discord-channel"},"Configuring the Discord channel"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"discord")," channel requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"username")," properties inside options. The URL should match a URL for an ",(0,r.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-use-discord-webhooks-to-get-notifications-for-your-website-status-on-ubuntu-18-04"},(0,r.kt)("inlineCode",{parentName:"a"},"incoming webhook")),"\nthat you have configured for your Discord server. And the username is just the name of the bot that will deliver the message."),(0,r.kt)("h4",{id:"id-configuring-the-telegram-channel"},"Configuring the Telegram channel"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"telegram")," channel requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"token")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"chatId")," properties inside options. The token should match a ",(0,r.kt)("a",{parentName:"p",href:"https://core.telegram.org/bots"},(0,r.kt)("inlineCode",{parentName:"a"},"Telegram bot token")),"\nthat you have created talking with ",(0,r.kt)("inlineCode",{parentName:"p"},"Bot Father"),". And the chatId is just the id of the chat that the bot will deliver the message."),(0,r.kt)("h2",{id:"id-writing-log-messages"},"Writing log messages"),(0,r.kt)("p",null,"You may write information to the logs using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," ",(0,r.kt)("a",{parentName:"p",href:"/docs/architecture-concepts/facades"},(0,r.kt)("inlineCode",{parentName:"a"},"facade")),". The logger provides\nthe five logging levels:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { Log } from '@athenna/logger'\n\nconst message = 'Hello Athenna!'\n\nLog.trace(message)\nLog.debug(message)\nLog.info(message)\nLog.success(message)\nLog.warn(message)\nLog.error(message)\nLog.fatal(message)\n")),(0,r.kt)("p",null,"You may call any of these methods to log a message for the corresponding level. By default, the message will be written\nto the default log channel as configured by your ",(0,r.kt)("inlineCode",{parentName:"p"},"logging")," configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"export class WelcomeController {\n  /** @type {import('#app/Services/WelcomeService').WelcomeService} */\n  #welcomeService\n\n  /**\n   * Create a new controller instance.\n   *\n   * @param {any} welcomeService\n   */\n  constructor(welcomeService) {\n    this.#welcomeService = welcomeService\n  }\n\n  /**\n   * Show the welcome payload.\n   *\n   * @param {import('@athenna/http').ContextContract} ctx\n   */\n  async show({ request, response }) {\n    const data = await this.#welcomeService.findOne()\n\n    Log.info(`Showing the welcome message for ip: ${request.ip}`)\n\n    return response.status(200).send(data)\n  }\n}\n")),(0,r.kt)("h3",{id:"id-writing-to-specific-channels"},"Writing to specific channels"),(0,r.kt)("p",null,"Sometimes you may wish to log a message to a channel other than your application's default channel. You may use the\n",(0,r.kt)("inlineCode",{parentName:"p"},"channel")," method on the ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," facade to retrieve and log to any channel defined in your configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Log.channel('slack').info('Hello from Athenna!')\n")),(0,r.kt)("h3",{id:"id-building-log-stacks"},"Building log stacks"),(0,r.kt)("p",null,"As mentioned previously, the ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," driver allows you to combine multiple channels into a single log channel for convenience.\nTo illustrate how to use log stacks, let's take a look at an example configuration that you might see in a production application:"),(0,r.kt)("p",null,"Take note of the ",(0,r.kt)("inlineCode",{parentName:"p"},"level")," configuration option present in ",(0,r.kt)("inlineCode",{parentName:"p"},"slack")," channel of your ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"channels: {\n    stack: {\n      driver: 'stack',\n      channels: ['application', 'slack'],\n    },\n\n    application: {\n      driver: 'console',\n      level: 'trace',\n\n      formatter: 'simple',\n    },\n\n    slack: {\n      driver: 'slack',\n      level: 'error',\n      url: 'your-slack-webhook-url',\n\n      formatter: 'message',\n    },\n},\n")),(0,r.kt)("p",null,"Let's dissect this configuration. First, notice our ",(0,r.kt)("inlineCode",{parentName:"p"},"stack")," channel aggregates two other channels via its channels option:\n",(0,r.kt)("inlineCode",{parentName:"p"},"application")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"slack"),'. So, when logging messages, both of these channels will have the opportunity to log the message.\nHowever, as we will see below, whether these channels actually log the message may be determined by the message\'s severity / "level".'),(0,r.kt)("h4",{id:"id-log-levels"},"Log levels"),(0,r.kt)("p",null,"Take note of the ",(0,r.kt)("inlineCode",{parentName:"p"},"level")," configuration option present on the ",(0,r.kt)("inlineCode",{parentName:"p"},"application")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"slack"),' channel configurations in the example above.\nThis option determines the minimum "level" a message must be in order to be logged by the channel. In descending order of\nseverity, these log levels are: ',(0,r.kt)("strong",{parentName:"p"},"fatal, error, warn, success, info, debug")," and ",(0,r.kt)("strong",{parentName:"p"},"trace"),"."),(0,r.kt)("p",null,"So, imagine we log a message using the ",(0,r.kt)("inlineCode",{parentName:"p"},"debug")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Log.debug('An informational message.')\n")),(0,r.kt)("p",null,"Given our configuration, the ",(0,r.kt)("inlineCode",{parentName:"p"},"application")," channel will write the message to the system log; however, since the error message is\nnot ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," or above, it will not be sent to Slack. However, if we log an ",(0,r.kt)("inlineCode",{parentName:"p"},"fatal")," message, it will be sent to both the system\nlog and Slack since the ",(0,r.kt)("inlineCode",{parentName:"p"},"fatal")," level is above our minimum level threshold for both channels:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Log.fatal('The application is down!')\n")),(0,r.kt)("h3",{id:"id-runtime-configurations"},"Runtime configurations"),(0,r.kt)("p",null,"It is also possible to set runtime configurations when using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," facade. This way you will never be total dependent\nfrom ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js")," configuration file. To accomplish this, you may pass a configuration object to the ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," method\nof Log facade and then call the ",(0,r.kt)("inlineCode",{parentName:"p"},"channel")," method again to set up the configurations for the specified driver:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const config = { url: 'other-slack-webhook-url' }\n\n// GOOD!! Configuration is now set for drivers.\nLog.config(config).channel('slack').info('Hello from Athenna!')\n\n// BAD!! Configuration are not going to be set for drivers.\nLog.config(config).info('Hello from Athenna!')\n")),(0,r.kt)("h2",{id:"id-formatters"},"Formatters"),(0,r.kt)("h3",{id:"id-available-channel-formatters"},"Available channel formatters"),(0,r.kt)("p",null,'Each log channel is powered by a "formatter". The formatter determines how the log message is actually formatted.\nThe following log channel formatters are available in every Athenna application. An entry for most of these formatters is\nalready present in your application\'s ',(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js")," configuration file, so be sure to review this file to become\nfamiliar with its contents:"),(0,r.kt)("table",null,(0,r.kt)("thead",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,"Name"),(0,r.kt)("th",null,"Description"))),(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"cli")),(0,r.kt)("td",null,"A more simple formatter, very useful when building CLI's")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"simple")),(0,r.kt)("td",null,"A formatter that only have the level, date, message and the MS")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"request")),(0,r.kt)("td",null,"A formatter that focus in logging application http requests")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("code",null,"message")),(0,r.kt)("td",null,"A formatter that focus in logging for some messenger application such as discord")))),(0,r.kt)("h3",{id:"id-writing-using-specific-formatter"},"Writing using specific formatter"),(0,r.kt)("p",null,"It is also possible to set ",(0,r.kt)("inlineCode",{parentName:"p"},"formatter")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"formatterConfig")," in runtime configurations when using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," facade:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import chalk from 'chalk'\n\nconst config = {\n    formatter: 'simple',\n    formatterConfig: { chalk: chalk.green },\n}\n\nLog.config(config).channel('slack').info('Hello from Athenna!')\n")),(0,r.kt)("h2",{id:"id-implementing-your-own-driver"},"Implementing your own driver"),(0,r.kt)("p",null,"You can implement your own ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," driver using the ",(0,r.kt)("inlineCode",{parentName:"p"},"DriverFactory")," class, but your class needs to implement the ",(0,r.kt)("inlineCode",{parentName:"p"},"transport"),"\nmethod and extends ",(0,r.kt)("inlineCode",{parentName:"p"},"Driver")," class:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { Driver } from '@athenna/logger'\n\nexport class ConsoleLogDriver extends Driver {\n  /**\n   * Creates a new instance of ConsoleLogDriver.\n   *\n   * @param {any} configs\n   * @return {ConsoleLogDriver}\n   */\n  constructor(configs) {\n    super(configs)\n  }\n\n  /**\n   * Transport the log.\n   *\n   * @param {string} level\n   * @param {any} message\n   * @return {any}\n   */\n  transport(level, message) {\n   /**\n    * Verify if this log could be transported.\n    */\n    if (!this.couldBeTransported(level)) {\n      return\n    }\n\n    let formatted = this.format(level, message)\n\n    if (this.driverConfig.addBar) {\n        formatted = formatted.concat('- BAR')\n    }\n\n    console.log(formatted)\n  }\n}\n")),(0,r.kt)("p",null,"Now we just need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"DriverFactory")," to register our new driver and set a name for him:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { DriverFactory } from '@athenna/logger'\n\nDriverFactory.createDriver('consoleLog', ConsoleLogDriver)\n")),(0,r.kt)("p",null,"Finally, we can start using our new driver in channels of ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"channels: {\n    consoleLogChannel: {\n        driver: 'consoleLog',\n        addBar: true,\n\n        formatter: 'simple'\n    }\n}\n")),(0,r.kt)("h2",{id:"id-implementing-your-own-formatter"},"Implementing your own formatter"),(0,r.kt)("p",null,"You can implement your own ",(0,r.kt)("inlineCode",{parentName:"p"},"Log")," formatter using the ",(0,r.kt)("inlineCode",{parentName:"p"},"FormatterFactory")," class, but your class needs to implement the ",(0,r.kt)("inlineCode",{parentName:"p"},"format"),"\nmethod and extends ",(0,r.kt)("inlineCode",{parentName:"p"},"Formatter")," class:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { Formatter } from '@athenna/logger'\n\nexport class ConsoleLogFormatter extends Formatter {\n  /**\n   * Format the message.\n   *\n   * @param {string} message\n   * @return {string}\n   */\n  format(message) {\n    const level = this.simpleLevel()\n\n    let messageFormatted = this.clean(\n      `${level} - ${this.timestamp()} - (${this.pid()}) ${this.applyColors(\n        message,\n      )}`,\n    )\n\n    if (this.configs.addFoo) {\n        messageFormatted = messageFormatted.concat('- FOO')\n    }\n\n    return messageFormatted\n  }\n}\n")),(0,r.kt)("p",null,"Now we just need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"FormatterFactory")," to register our new formatter and set a name for him:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import { FormatterFactory } from '@athenna/logger'\n\nFormatterFactory.createFormatter('consoleLog', ConsoleLogFormatter)\n")),(0,r.kt)("p",null,"Finally, we can start using our new formatter in channels of ",(0,r.kt)("inlineCode",{parentName:"p"},"config/logging.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"channels: {\n    consoleLogChannel: {\n        driver: 'consoleLog',\n        addBar: true,\n\n        formatter: 'consoleLog',\n        formatterConfig: {\n            addFoo: true,\n        }\n    }\n}\n")))}d.isMDXComponent=!0}}]);