"use strict";(self.webpackChunk_athenna_docs=self.webpackChunk_athenna_docs||[]).push([[8475],{6346:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var i=n(4848),s=n(8453);const o={title:"Security with Helmet",sidebar_position:9,description:"See how to improve the security of your REST API with Helmet in Athenna."},r="Security with Helmet",l={id:"rest-api-application/security-with-helmet",title:"Security with Helmet",description:"See how to improve the security of your REST API with Helmet in Athenna.",source:"@site/docs/rest-api-application/security-with-helmet.mdx",sourceDirName:"rest-api-application",slug:"/rest-api-application/security-with-helmet",permalink:"/docs/rest-api-application/security-with-helmet",draft:!1,unlisted:!1,editUrl:"https://github.com/AthennaIO/Docs/tree/main/docs/rest-api-application/security-with-helmet.mdx",tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"Security with Helmet",sidebar_position:9,description:"See how to improve the security of your REST API with Helmet in Athenna."},sidebar:"tutorialSidebar",previous:{title:"Tracing Requests",permalink:"/docs/rest-api-application/tracing-requests"},next:{title:"Swagger Documentation",permalink:"/docs/rest-api-application/swagger-documentation"}},c={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Basic usage",id:"basic-usage",level:2},{value:"Configuring for specific routes",id:"configuring-for-specific-routes",level:2},{value:"Usage in route groups",id:"usage-in-route-groups",level:3},{value:"Usage in route resources",id:"usage-in-route-resources",level:3},{value:"Disabling Helmet",id:"disabling-helmet",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"security-with-helmet",children:"Security with Helmet"}),"\n",(0,i.jsx)(t.p,{children:"See how to improve the security of your REST API with Helmet in Athenna."}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/helmet",children:(0,i.jsx)(t.code,{children:"Helmet"})})," helps secure\napplications by setting HTTP response headers. By default,\nHelmet sets the following headers:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Content-Security-Policy"}),": A powerful allow-list of what can\nhappen on your page which mitigates many attacks."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Cross-Origin-Opener-Policy"}),": Helps process-isolate your\npage."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Cross-Origin-Resource-Policy"}),": Blocks others from loading\nyour resources cross-origin."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Origin-Agent-Cluster"}),": Changes process isolation to be\norigin-based."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Referrer-Policy"}),": Controls the Referer header."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Strict-Transport-Security"}),": Tells browsers to prefer\nHTTPS."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Content-Type-Options"}),": Avoids MIME sniffing."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-DNS-Prefetch-Control"}),": Controls DNS prefetching."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Download-Options"}),": Forces downloads to be saved\n(Internet Explorer only)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Frame-Options"}),": Legacy header that mitigates clickjacking\nattacks."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Permitted-Cross-Domain-Policies"}),": Controls cross-domain\nbehavior for Adobe products, like Acrobat."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Powered-By"}),": Info about the web server. Removed because\nit could be used in simple attacks."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-XSS-Protection"}),": Legacy header that tries to mitigate XSS\nattacks, but makes things worse, so Helmet disables it."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"basic-usage",children:"Basic usage"}),"\n",(0,i.jsxs)(t.p,{children:["Athenna uses the ",(0,i.jsx)(t.a,{href:"https://github.com/fastify/helmet",children:(0,i.jsx)(t.code,{children:"@fastify/helmet"})}),"\nplugin inside ",(0,i.jsx)(t.code,{children:"HttpKernel"}),". All the configurations that\n",(0,i.jsx)(t.code,{children:"@fastify/helmet"})," supports can be set inside ",(0,i.jsx)(t.code,{children:"Path.config('http.ts')"}),"\nfile in the ",(0,i.jsx)(t.code,{children:"helmet"})," object:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"export default {\n  helmet: {\n    enabled: true,\n    global: true\n  }\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"configuring-for-specific-routes",children:"Configuring for specific routes"}),"\n",(0,i.jsxs)(t.p,{children:["In Athenna you can set specific options of helmet\nfor specific routes. You can also disable the ",(0,i.jsx)(t.code,{children:"global"}),"\noption of your ",(0,i.jsx)(t.code,{children:"helmet"})," configuration in ",(0,i.jsx)(t.code,{children:"Path.config('http.ts')"}),"\nand set different rules in your routes:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route\n  .get('/hello', 'WelcomeController.show')\n  .helmet({ frameguard: { action: 'foo' } }) \ud83d\udc48\n"})}),"\n",(0,i.jsx)(t.h3,{id:"usage-in-route-groups",children:"Usage in route groups"}),"\n",(0,i.jsxs)(t.p,{children:["You can also use the ",(0,i.jsx)(t.code,{children:"helmet()"})," method in route groups.\nThis will set the same configuration for all routes inside\nthe group:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"Route.group(() => {\n    Route.get('/hello', 'WelcomeController.show')\n}).helmet({ frameguard: { action: 'foo' } }) \ud83d\udc48\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"helmet()"}),' method of route groups will never\noverwrite the already set methods of routes. Use it\nto create "defaults" configurations for all routes.']})}),"\n",(0,i.jsx)(t.h3,{id:"usage-in-route-resources",children:"Usage in route resources"}),"\n",(0,i.jsx)(t.p,{children:"Same behavior as route groups, but for resources:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.route('http.ts')\"",children:"// Set the same configurations for all routes of resource\nRoute.resource('/tests', 'WelcomeController').helmet({...})\n\n// Set configuration only for that specific action of resource\nRoute.resource('/tests', 'WelcomeController').helmet('index', {...})\nRoute.resource('/tests', 'WelcomeController').helmet('store', {...})\n"})}),"\n",(0,i.jsx)(t.h2,{id:"disabling-helmet",children:"Disabling Helmet"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"HttpKernel"})," class will automatically disable the\nplugin registration if the package does not exist, so\nto disable helmet in Athenna you need to\nremove the ",(0,i.jsx)(t.code,{children:"@fastify/helmet"})," package from your\napplication:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm remove @fastify/helmet\n"})}),"\n",(0,i.jsxs)(t.p,{children:["You can also disable by setting ",(0,i.jsx)(t.code,{children:"http.helmet.enabled"})," to ",(0,i.jsx)(t.code,{children:"false"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",metastring:"title=\"Path.config('http.ts')\"",children:"export default {\n  helmet: {\n    enabled: false\n  }\n}\n"})})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var i=n(6540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);