"use strict";(self.webpackChunk_athenna_docs=self.webpackChunk_athenna_docs||[]).push([[6108],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),g=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=g(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=g(n),d=a,m=c["".concat(l,".").concat(d)]||c[d]||p[d]||i;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var g=2;g<i;g++)o[g]=n[g];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2375:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return s},metadata:function(){return g},toc:function(){return u}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],s={sidebar_position:6,id:"swagger",title:"Documenting with Swagger",hide_title:!0,hide_table_of_contents:!0,tags:["Http","Swagger","Documentation","Digging Deeper"]},l=void 0,g={unversionedId:"digging-deeper/swagger",id:"digging-deeper/swagger",title:"Documenting with Swagger",description:"\ud83c\udfe0",source:"@site/docs/digging-deeper/swagger.mdx",sourceDirName:"digging-deeper",slug:"/digging-deeper/swagger",permalink:"/docs/digging-deeper/swagger",editUrl:"https://github.com/AthennaIO/Docs/docs/digging-deeper/swagger.mdx",tags:[{label:"Http",permalink:"/docs/tags/http"},{label:"Swagger",permalink:"/docs/tags/swagger"},{label:"Documentation",permalink:"/docs/tags/documentation"},{label:"Digging Deeper",permalink:"/docs/tags/digging-deeper"}],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,id:"swagger",title:"Documenting with Swagger",hide_title:!0,hide_table_of_contents:!0,tags:["Http","Swagger","Documentation","Digging Deeper"]},sidebar:"tutorialSidebar",previous:{title:"Graceful Shutdown",permalink:"/docs/digging-deeper/graceful-shutdown"},next:{title:"Helmet",permalink:"/docs/security/helmet"}},u=[{value:"Introduction",id:"id-introduction",children:[],level:2},{value:"Configuration",id:"id-configuration",children:[],level:2},{value:"Basic usage",id:"id-basic-usage",children:[{value:"Usage in route groups",id:"id-usage-in-route-groups",children:[],level:3},{value:"Usage in route resources",id:"id-usage-in-route-resources",children:[],level:3}],level:2},{value:"Disabling swagger",id:"id-disabling-swagger",children:[],level:2}],p={toc:u};function c(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("nav",{"aria-label":"breadcrumbs"},(0,i.kt)("ul",{class:"breadcrumbs"},(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link",href:"/"},"\ud83c\udfe0")),(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link"},"Digging Deeper")),(0,i.kt)("li",{class:"breadcrumbs__item"},(0,i.kt)("a",{class:"breadcrumbs__link",href:"/docs/digging-deeper/swagger"},"Documenting with Swagger")))),(0,i.kt)("span",{class:"badge badge--secondary margin-top-bot"},"version 1.0.0"),(0,i.kt)("h1",{id:"documenting-with-swagger"},"Documenting with Swagger"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"introduction"},(0,i.kt)("a",{parentName:"h4",href:"#id-introduction"},"Introduction"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"configuration"},(0,i.kt)("a",{parentName:"h4",href:"#id-configuration"},"Configuration"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"basic-usage"},(0,i.kt)("a",{parentName:"h4",href:"#id-basic-usage"},"Basic usage")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"usage-in-route-groups"},(0,i.kt)("a",{parentName:"h4",href:"#id-usage-in-route-groups"},"Usage in route groups"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"usage-in-route-resources"},(0,i.kt)("a",{parentName:"h4",href:"#id-usage-in-route-resources"},"Usage in route resources"))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h4",{parentName:"li",id:"disabling-swagger"},(0,i.kt)("a",{parentName:"h4",href:"#id-disabling-swagger"},"Disabling swagger")))),(0,i.kt)("h2",{id:"id-introduction"},"Introduction"),(0,i.kt)("p",null,"Swagger allows you to describe the structure of your APIs so that machines can read them. The ability of APIs to describe\ntheir own structure is the root of all awesomeness in Swagger."),(0,i.kt)("h2",{id:"id-configuration"},"Configuration"),(0,i.kt)("p",null,"Athenna uses the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/fastify/fastify-swagger"},(0,i.kt)("inlineCode",{parentName:"a"},"@fastify/swagger"))," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/fastify/fastify-swagger-ui"},(0,i.kt)("inlineCode",{parentName:"a"},"@fastify/swagger-ui"))," plugins inside ",(0,i.kt)("inlineCode",{parentName:"p"},"HttpKernel"),".\nAll the configurations that ",(0,i.kt)("inlineCode",{parentName:"p"},"@fastify/swagger")," supports can be set inside ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file in the ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger.configurations")," object. And all the configurations that ",(0,i.kt)("inlineCode",{parentName:"p"},"@fastify/swagger-ui"),"\nsupports can be set inside ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file in the ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger.ui")," object:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"swagger: {\n    ui: {\n        routePrefix: '/documentation',\n    },\n    configurations: {\n        mode: 'dynamic',\n        swagger: {\n            info: {\n                title: 'Athenna Swagger'\n            }\n        },\n    }\n}\n")),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"We highly recommend opening the ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file in ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger")," configurations to see a little documentation of all it's options."))),(0,i.kt)("h2",{id:"id-basic-usage"},"Basic usage"),(0,i.kt)("p",null,"You can set your Swagger configurations using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Route")," facade in ",(0,i.kt)("inlineCode",{parentName:"p"},"routes/http.js")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.get('/hello', 'WelcomeController.show')\n    .summary('Hello route')\n    .tags('hello', 'world')\n    .description('Hello route used to say hello to the user')\n    .queryString('name', 'string', 'Name to say hello')\n    .response(200, {\n        description: 'Successful response',\n        properties: {\n            name: { type: 'string' }\n        }\n    })\n")),(0,i.kt)("p",null,"You can also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger")," method and use the same configurations of ",(0,i.kt)("inlineCode",{parentName:"p"},"@fastify/swagger")," plugin:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.get('/hello', 'WelcomeController.show').swagger({\n    summary: 'Hello route',\n    tags: ['hello', 'world'],\n    description: 'Hello route used to say hello to the user',\n    querystring: {\n      type: 'object',\n      properties: {\n        name: {\n          type: 'string',\n          description: 'Name to say hello'\n        }\n      }\n    },\n    response: {\n        200: {\n            description: 'Successful response',\n            properties: {\n                name: { type: 'string' }\n            }\n        }\n    }\n})\n")),(0,i.kt)("h3",{id:"id-usage-in-route-groups"},"Usage in route groups"),(0,i.kt)("p",null,"In route groups you can only use the ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger")," method. This will set the same configuration for all routes inside\nthe group:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Route.group(() => {\n    Route.get('/hello', 'WelcomeController.show').summary('Hello route')\n}).swagger({...})\n")),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger"),' method of route groups will never subscribe the already set methods of routes. Use then to create "defaults"\nconfigurations for all routes such as ',(0,i.kt)("inlineCode",{parentName:"p"},"security"),"."))),(0,i.kt)("h3",{id:"id-usage-in-route-resources"},"Usage in route resources"),(0,i.kt)("p",null,"In route resources you can only use the ",(0,i.kt)("inlineCode",{parentName:"p"},"swagger")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// Set the same configurations for all routes of resource\nRoute.resource('/tests', 'WelcomeController').swagger({...})\n\n// Set configuration only for that specific action of resource\nRoute.resource('/tests', 'WelcomeController').swagger('index', {...})\nRoute.resource('/tests', 'WelcomeController').swagger('store', {...})\n")),(0,i.kt)("h2",{id:"id-disabling-swagger"},"Disabling swagger"),(0,i.kt)("p",null,"Swagger plugin is registered in your http application by default, but you can remove it setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"noSwagger")," as\n",(0,i.kt)("inlineCode",{parentName:"p"},"true")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"config/http.js")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"noSwagger: true\n")))}c.isMDXComponent=!0}}]);