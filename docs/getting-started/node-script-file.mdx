---
title: Node Script File
sidebar_position: 2
description: Understand what is the purpose of the node script file.
tags:
  - Getting Started
  - Node Script File
---

# Node Script File

Understand what is the purpose of the node script file.

## Introduction

The node script file in your project root is a basic script to
run Node.js with predefined CLI arguments; without this script,
you would need to pass all the necessary arguments to run the
application every time in the terminal.

## The `--loader` flag

The `--loader=ts-node/esm` flag is required to run your Athenna
application in development mode with TypeScript. This flag is
responsible to set up a Node.js ESM loader that will first compile
your modules every time that you ask to import them using the
`import` statement.

Let's suppose that you have the following `index.ts` file:

```typescript
class Hello {
  public static world(): string {
    return 'Hello world!'
  }
}

console.log(Hello.world())
```

To be able to run this file with Node.js, you can use the
following command:

```bash
node --loader=ts-node/esm index.ts
```

Or use the node script file that already has this flag
set:

```bash
./node index.ts
```

:::tip

If you wish to use any Node.js CLI flag when running
some script, you can add it before your script file name,
for example:

```bash
./node --watch index.ts
```

Or you could add it to be called every time inside
the node script file together with the `--loader` and
`--experimental-import-meta-resolve` flags.

:::

## The `--experimental-import-meta-resolve` flag

The `--experimental-import-meta-resolve` is required in all
situations, development or production. This flag is
responsible to provide a module-relative resolution function
scoped to each module, returning the URL string of the resolved
module. This function accepts a second argument which is the
parent module from which to resolve from:

```typescript
const specifier = '#app/services/MyService'
const metaUrl = import.meta.url

const url = await import.meta.resolve(specifier, metaUrl)

const { MyService } = await import(url)
```

Athenna uses a lot of this functionality to import the modules
that you define in your [`.athennarc.json`](/docs/getting-started/athennarc-file)
file. If this flag is not present, an exception will be thrown
when bootstrapping your application.

## Running artisan file as argument

If you take a look at the content of the node script file,
you will see that we are using [sed](https://www.geeksforgeeks.org/sed-command-linux-set-2/)
command to replace the `artisan` argument with the path to
`Path.bootstrap('main.ts')` file.

This is a tricky implementation that will allow you to call
your artisan commands without the need to add the full path
to artisan:

## The future of node script file

As you may have noticed, this node script is a hell of a
kludge ðŸ¤£.

But the good news is that in future Node.js versions,
the `--experimental-import-meta-resolve` flag will not be
necessary to use the `import.meta.resolve` function. Also,
in future Node.js versions, we might have better support
for TypeScript the same way [Deno](https://deno.com/) and
[Bun](https://bun.sh/) does since a big part of the community
is very committed in making this happen as you can see in
[this GitHub issue](https://github.com/nodejs/node/issues/43818).

So, in the future, you might be able to remove (if you want)
the node script file from your project and simply use `node`
to run your application. Also, if you have a good idea on
how to implement a better solution to this problem, please
feel free to [open an issue at @athenna/core repository](https://github.com/AthennaIO/Core/issues/new/choose),
it will be really cool to discuss a better implementation
for this with you ðŸ˜Ž.
