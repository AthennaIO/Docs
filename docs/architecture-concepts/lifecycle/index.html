<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="icon" href="/img/logo.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#242526" media="(prefers-color-scheme: dark)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/logo.png">
<link rel="mask-icon" href="/img/logo.png" color="rgb(80,27,134)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000"><title data-react-helmet="true">Application Lifecycle | Athenna</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://athenna.io/docs/architecture-concepts/lifecycle"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Application Lifecycle | Athenna"><meta data-react-helmet="true" name="description" content="üè†"><meta data-react-helmet="true" property="og:description" content="üè†"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://athenna.io/docs/architecture-concepts/lifecycle"><link data-react-helmet="true" rel="alternate" href="https://athenna.io/docs/architecture-concepts/lifecycle" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://athenna.io/docs/architecture-concepts/lifecycle" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9cd271de.css">
<link rel="preload" href="/assets/js/runtime~main.8260defa.js" as="script">
<link rel="preload" href="/assets/js/main.08317aea.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Athenna Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Athenna Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Athenna</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/installation">Documentation</a><a class="navbar__item navbar__link" href="/benchmarks">Benchmarks</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/athennaio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">üåú</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">üåû</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/getting-started/installation">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/architecture-concepts/lifecycle">Architecture Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/architecture-concepts/lifecycle">Application Lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-concepts/container">Service Container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-concepts/providers">Service Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-concepts/facades">Facades</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/the-basics/http/routing">The Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/digging-deeper/repl">Digging Deeper</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/security/helmet">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/database/getting-started">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/orm/getting-started">ORM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/testing/getting-started">Testing</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_vinB"><article><div class="theme-doc-markdown markdown"><nav aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link">Architecture Concepts</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/architecture-concepts/lifecycle">Application Lifecycle</a></li></ul></nav><span class="badge badge--secondary margin-top-bot">version 1.0.0</span><h1>Application Lifecycle</h1><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="introduction"><a href="#id-introduction">Introduction</a><a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="lifecycle-overview"><a href="#id-lifecycle-overview">Lifecycle overview</a><a class="hash-link" href="#lifecycle-overview" title="Direct link to heading">‚Äã</a></h4><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="first-steps"><a href="#id-first-steps">First steps</a><a class="hash-link" href="#first-steps" title="Direct link to heading">‚Äã</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="service-providers"><a href="#id-service-providers">Service providers</a><a class="hash-link" href="#service-providers" title="Direct link to heading">‚Äã</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="kernels"><a href="#id-kernels">Kernels</a><a class="hash-link" href="#kernels" title="Direct link to heading">‚Äã</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="routes"><a href="#id-routes">Routes</a><a class="hash-link" href="#routes" title="Direct link to heading">‚Äã</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="finishing-up"><a href="#id-finishing-up">Finishing up</a><a class="hash-link" href="#finishing-up" title="Direct link to heading">‚Äã</a></h4></li></ul></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="focus-on-service-providers"><a href="#id-focus-on-service-providers">Focus on service providers</a><a class="hash-link" href="#focus-on-service-providers" title="Direct link to heading">‚Äã</a></h4></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="id-introduction">Introduction<a class="hash-link" href="#id-introduction" title="Direct link to heading">‚Äã</a></h2><p>When using any tool in the &quot;real world&quot;, you feel more confident if you understand how that tool works. Application
development is no different. When you understand how your development tools function, you feel more comfortable and
confident using them.</p><p>The goal of this document is to give you a good, high-level overview of how the Athenna framework works. By getting to
know the overall framework better, everything feels less &quot;magical&quot; and you will be more confident building your
applications. If you don&#x27;t understand all the terms right away, don&#x27;t lose heart! Just try to get a basic grasp of what
is going on, and your knowledge will grow as you explore other sections of the documentation.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="id-lifecycle-overview">Lifecycle overview<a class="hash-link" href="#id-lifecycle-overview" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="id-first-steps">First steps<a class="hash-link" href="#id-first-steps" title="Direct link to heading">‚Äã</a></h3><p>The entry point for all types of an Athenna application is the <code>bootstrap/main.js</code> file. The first action taken by Athenna
itself is to create an instance of the application and then boot it.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Athenna has the class called <code>Ignite</code>. This class is responsible for resolving your environment, your language type (ts, js),
resolving your environment files and configuration files of <code>config</code> folder and booting/registering your providers. In the
end of all, <code>fire</code> method returns a new <code>Application</code> instance, and it&#x27;s with this instance that we are going to choose
what type of application we want to run (http, worker, cli, etc...).</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="id-service-providers">Service providers<a class="hash-link" href="#id-service-providers" title="Direct link to heading">‚Äã</a></h3><p>One of the most important kernel bootstrapping actions is loading the service providers for your application. All the
service providers for the application are configured in the <code>config/app.js</code> configuration file&#x27;s providers array.</p><p>Athenna will iterate through this list of providers and instantiate each of them. After instantiating the providers,
the <code>register</code> method will be called on all the providers. Then, once all the providers have been registered, the
<code>boot</code> method will be called on each provider. This is so service providers may depend on every container binding being
registered and available by the time their boot method is executed.</p><p>Service providers are responsible for bootstrapping all the framework&#x27;s various components, such as the database, http server,
validation, services and routing components. Essentially every major feature offered by Athenna is bootstrapped and
configured by a service provider. Since they bootstrap and configure so many features offered by the framework, service
providers are the most important aspect of the entire Athenna bootstrap process.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="id-kernels">Kernels<a class="hash-link" href="#id-kernels" title="Direct link to heading">‚Äã</a></h3><p>Each Athenna application type have a <code>Kernel</code>. This classes serves configurations for each type of application.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Http Kernel</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Console Kernel</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>The Kernel of <code>Http</code> folder extends the <code>HttpKernel</code> class from <code>@athenna/http</code>, which defines some bootstraps that will
be run before the <code>routes/http</code> file is preloaded. These bootstraps configure error handling, configure logging, detect
the application environment, and perform other tasks that need to be done before the request is actually handled. Typically,
these classes handle internal Athenna configuration that you do not need to worry about.</p><p>The Kernel of <code>Http</code> folder also defines a list of global <a href="/docs/the-basics/http/middlewares"><code>middlewares</code></a> that all requests must pass through before being
handled by the application. It also defines your named middlewares to use inside <code>routes/http</code> file. See the example:</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">* The application&#x27;s global HTTP middlewares.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">* This middlewares are run during every request to your http server.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">globalMiddlewares</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#app/Http/Middlewares/ResponseMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Or you can define as a named middleware and choose what routes are going to use it inside <code>routes/http</code>:</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">* The application&#x27;s named HTTP middlewares.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">* Here you define all your named middlewares to use inside routes/http file.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">namedMiddlewares</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        response</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#app/Http/Middlewares/ResponseMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token maybe-class-name">Route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;WelcomeController.show&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">middleware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;response&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>The Kernel of <code>Console</code> folder extends the <code>ConsoleKernel</code> class from <code>@athenna/artisan</code>, which defines some bootstraps that will
be run before the <code>routes/console.js</code> file is preloaded. These bootstraps configure error handling, configure logging, register custom
templates, detect the application environment, and perform other tasks that need to be done before the request is actually handled.
Typically, these classes handle internal Athenna configuration that you do not need to worry about.</p><p>The Kernel of <code>Console</code> folder also defines a list of <a href="/docs/the-basics/cli/commands"><code>commands</code></a> that will be registered
before the application bootstrap and before preloading <code>routes/console.js</code>. See the example:</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Register the commands for the application.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @return {any[]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">commands</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> internalCommands </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token maybe-class-name">ArtisanLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadCommands</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token maybe-class-name">TestLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadCommands</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> appCommands </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Folder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Commands&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getFilesByPattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;**/*.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">command</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">href</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function maybe-class-name" style="color:rgb(130, 170, 255)">Env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;NODE_ENV&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;production&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> appCommands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">internalCommands</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">appCommands</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In Athenna you can use the loaders helpers such as <code>TestLoader</code> to load all commands and custom templates from
each package.</p><p>But as you can see we have a little logic here to separate what is an internal command of Artisan of what is a command of
your application. If we hadn&#x27;t separated the internal and application commands, when you were going to publish your library,
the internal Artisan commands like <code>node artisan make:test</code> would be there.</p><p>The Kernel of <code>Console</code> folder also defines a list of <a href="/docs/the-basics/cli/commands#id-registering-custom-templates"><code>templates</code></a> that you can set to use inside your commands using the
<code>TemplateHelper</code> class from <code>@athenna/artisan</code>. See the example:</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Register the custom templates for the application.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @return {any[]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">templates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token maybe-class-name">TestLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadTemplates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token maybe-class-name">ArtisanLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">loadTemplates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="id-routes">Routes<a class="hash-link" href="#id-routes" title="Direct link to heading">‚Äã</a></h3><p>The <code>routes</code> folder is the kernel of your application. The route files that you will find here are:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">http</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">console</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>This file is responsible to create a contract between your client and your application. Is
in here that we define all of ours routes and the controllers who will handle the client request.</p><p>One of the most important service providers in your application is the <code>HttpRouteProvider</code>. This service provider adds in
the container the <code>Route</code> class instance used inside <code>http</code> file.</p><p>When the client request arrives, the server first execute all <code>handle</code> method of your global middlewares. Than it will execute
the <code>handle</code> method of all your route middlewares. Once it finish, it goes for your controller or handler function. See the example:</p><img src="/img/handle-request-1-light.png" alt="Handle request image" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/handle-request-1-dark.png" alt="Handle request image" class="themedImage_W2Cr themedImage--dark_oUvU"></div><div role="tabpanel" hidden=""><p>This file is responsible to create a contract between your client and your application. Is in here that we define some
of ours commands and their handlers.</p><p>One of the most important service providers in your application is the <code>ArtisanProvider</code>. This service provider adds in
the container the <code>Artisan</code> class instance used inside <code>console</code> file.</p><p>When console commands arrive, the Artisan will take all the arguments sent by the client and send to <a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener noreferrer"><code>commander</code></a>
to resolve the command. Then commander will execute the <code>handler</code> defined by your command. See the example:</p><img src="/img/handle-console-1-light.png" alt="Handle console image" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/handle-console-1-dark.png" alt="Handle console image" class="themedImage_W2Cr themedImage--dark_oUvU"></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="id-finishing-up">Finishing up<a class="hash-link" href="#id-finishing-up" title="Direct link to heading">‚Äã</a></h3><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">http</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">cli</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>Once the controller/handler function returns a response, the response will travel back outward through the <code>intercept</code>
method of each global middleware and than route&#x27;s middleware, giving the application a chance to modify or examine the
outgoing response. See the example:</p><img src="/img/handle-request-2-light.png" alt="Handle request image" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/handle-request-2-dark.png" alt="Handle request image" class="themedImage_W2Cr themedImage--dark_oUvU"><p>As you can see in the example the response content is sent to the client. The request finish for the client but not for
the server. Now it&#x27;s time to execute the <code>terminate</code> method from our global and route&#x27;s middleware. The <code>terminate</code> method
is executed when a response has been sent, so you will not be able to send more data to the client. It can however be
useful for sending data to external services, for example, create metrics of the entire request. See the example:</p><img src="/img/handle-request-3-light.png" alt="Handle request image" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/handle-request-3-dark.png" alt="Handle request image" class="themedImage_W2Cr themedImage--dark_oUvU"><p>Finally, once the <code>terminate</code> method is executed in all middlewares the request finish in the server. We&#x27;ve finished
our journey through the entire Athenna request lifecycle!</p></div><div role="tabpanel" hidden=""><p>That&#x27;s all the flow of calling a command inside Athenna using Artisan. It&#x27;s very simple, the application starts, runs and
goes down.</p><img src="/img/handle-console-1-light.png" alt="Handle console image" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/handle-console-1-dark.png" alt="Handle console image" class="themedImage_W2Cr themedImage--dark_oUvU"><p>We&#x27;ve finished our journey through the entire Athenna console command lifecycle!</p></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="id-focus-on-service-providers">Focus on service providers<a class="hash-link" href="#id-focus-on-service-providers" title="Direct link to heading">‚Äã</a></h2><p>Service providers are truly the key to bootstrapping an Athenna application. The application instance is created, the
service providers are registered, and the request is handed to the bootstrapped application. It&#x27;s really that simple!</p><p>Having a firm grasp of how an Athenna application is built and bootstrapped via service providers is very valuable.
Your application&#x27;s default service providers are stored in the <code>providers</code> directory.</p><p>By default, the <code>AppServiceProvider</code> is fairly empty. This provider is a great place to add your application&#x27;s own
bootstrapping and service container bindings. For large applications, you may wish to create several service providers,
each with more granular bootstrapping for specific services used by your application.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/architecture-concepts">Architecture Concepts</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/AthennaIO/Docs/docs/architecture-concepts/lifecycle.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/structure"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Directory Structure</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/architecture-concepts/container"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Service Container</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/installation">Guides</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/mZyBkA936X" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/athennaio" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/athennaio" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Athenna, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8260defa.js"></script>
<script src="/assets/js/main.08317aea.js"></script>
</body>
</html>